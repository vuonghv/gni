{% extends 'gallery/base_generic.html' %}

{% block content %}

<p>Title: {{ image.title }}</p>
<p>Description: {{ image.description }}</p>
<img height="200px" width="400px" src="{{ image.img.url }}" />
<p>
    {% if liked %}

        <p>
            <form id="unlike-image-form" method="POST" action="{% url 'gallery:unlike-image' image.id %}">
                {% csrf_token %}
            </form>
            <a href="#" onclick="document.getElementById('unlike-image-form').submit();">Unlike</a>
        </p>
        <a href="{% url 'gallery:detail-user' user.id %}">You</a> and {{ number_others_like }} others like this, Date posted: {{ image.time_created }}

    {% else %}

        <p>
            <form id="like-image-form" method="POST" action="{% url 'gallery:like-image' image.id %}">
                {% csrf_token %}
            </form>
            <a href="#" onclick="document.getElementById('like-image-form').submit();">Like</a>
        </p>
        {{ users_like.count }} others like this, Date posted: {{ image.time_created }}

    {% endif %}
        
</p>
<br />
<p>Comments:</p>
{% for c in comments %}
    <p><a href="{% url 'gallery:detail-user' user.id %}">{{ c.owner }}</a>: {{ c.content }}</p>
    <p>time: {{ c.time_updated }}</p>
    <br/>
{% endfor %}

<br/></br>
<p>{{ user }}:</p>
<form method="POST" action="{% url 'gallery:create-comment' %}">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <input type="submit" value="Post comment" />
</form>

{% endblock %}
